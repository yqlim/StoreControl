/*!
 * StoreControl
 * (c) 2019 Yong Quan Lim
 * Released under MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).StoreControl=t()}(this,function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var u=function(){function r(){var e=this;t(this,r);var n=function(){return function(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,e),{value:[]}}.bind(this);Object.defineProperties(this,{keys:n(),values:n(),entries:n()})}var o,i,u;return o=r,(i=[{key:"size",value:function(){var e=this.entries.length,t=this.values.length,n=this.keys.length;if(e!==t||e!==n||"number"!=typeof e||e<0)throw new RangeError("Item(s) of entries, values or keys has been altered by external method.");return e}},{key:"set",value:function(t,n){if(!("string"==typeof t||"number"==typeof t&&t!==1/0&&t!==-1/0||"object"===e(t)&&t||"function"==typeof t||"symbol"===e(t)))throw new TypeError("Key must be a string, object, function, valid number, symbol of Symbol(), or NaN.");var r=this.keys.indexOf(t);if(r<0)r=this.size(),this.entries[r]=[];else if(this.values[r]instanceof a)throw new TypeError('Cannot replace "'.concat(t,'" because it is a user-defined StoreControl branch.'));return this.keys[r]=t,this.values[r]=n,this.entries[r][0]=t,this.entries[r][1]=n,n}},{key:"get",value:function(e){var t=this.keys.indexOf(e);return t<0?null:this.values[t]}},{key:"has",value:function(e){return this.keys.indexOf(e)>=0}},{key:"branch",value:function(e){if(this.has(e))throw new TypeError('Property "'.concat(e,'" already exists in this StoreControl instance.'));return this.set(e,new a)}},{key:"of",value:function(e){var t=this.get(e);if(null===t)throw new ReferenceError('Branch "'.concat(e,'" does not exist in this StoreControl instance.'));if(!(t instanceof a))throw new TypeError('"'.concat(e,'" key does not link to a StoreControl branch.'));return t}},{key:"isBranch",value:function(e){try{return!!this.of(e)}catch(e){return!1}}},{key:"delete",value:function(e){var t=this.keys.indexOf(e);return!(t<0)&&(this.keys.splice(t,1),this.values.splice(t,1),this.entries.splice(t,1),!0)}},{key:"clear",value:function(){this.keys.splice(0),this.values.splice(0),this.entries.splice(0)}},{key:"asMap",value:function(){var e={},t=!0,n=!1,r=void 0;try{for(var o,i=this.entries[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var u=s(o.value,2),a=u[0],f=u[1];e[a]=this.isBranch(f)?f.asMap():f}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e}}])&&n(o.prototype,i),u&&n(o,u),r}(),a=function(e){function n(){return t(this,n),i(this,r(n).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,u),n}();return u});