/*!
 * StoreControl
 * (c) 2019 Yong Quan Lim
 * Released under MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).StoreControl=t()}(this,function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}function o(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var u=function(){function n(){var t=this;e(this,n);var r=function(){return i(this,t),{value:[]}}.bind(this);Object.defineProperties(this,{keys:r(),values:r(),entries:r()})}var r,o,u;return r=n,(o=[{key:"size",value:function(){var e=this.entries.length,t=this.values.length,n=this.keys.length;if(e!==t||e!==n||"number"!=typeof e||e<0)throw new RangeError("Item(s) of entries, values or keys has been altered by external method.");return e}},{key:"set",value:function(e,t){if(null===e||"boolean"==typeof e||"number"==typeof e&&!isFinite(e))throw new TypeError("Key cannot be null, a boolean, or an infinite number.");var n=this.keys.indexOf(e);if(n<0)n=this.size(),this.entries[n]=[];else if(this.values[n]instanceof a)throw new TypeError('Cannot replace "'.concat(e,'" because it is a user-defined StoreControl branch.'));return this.keys[n]=e,this.values[n]=t,this.entries[n][0]=e,this.entries[n][1]=t,t}},{key:"get",value:function(e){var t=this.keys.indexOf(e);return t<0?null:this.values[t]}},{key:"has",value:function(e){return this.keys.indexOf(e)>=0}},{key:"branch",value:function(e){if(this.has(e))throw new TypeError('Property "'.concat(e,'" already exists in this StoreControl instance.'));return this.set(e,new a)}},{key:"of",value:function(e){var t=this.get(e);if(null===t)throw new ReferenceError('Branch "'.concat(e,'" does not exist in this StoreControl instance.'));if(!(t instanceof a))throw new TypeError('"'.concat(e,'" key does not link to a StoreControl branch.'));return t}},{key:"isBranch",value:function(e){try{return!!this.of(e)}catch(e){return!1}}},{key:"delete",value:function(e){var t=this.keys.indexOf(e);return!(t<0)&&(this.keys.splice(t,1),this.values.splice(t,1),this.entries.splice(t,1),!0)}},{key:"clear",value:function(){this.keys.splice(0),this.values.splice(0),this.entries.splice(0)}},{key:"asMap",value:function(){var e=this,t={};return this.entries.forEach(function(n){var r=s(n,2),o=r[0],u=r[1];i(this,e),t[o]=this.isBranch(o)?u.asMap():u}.bind(this)),t}}])&&t(r.prototype,o),u&&t(r,u),n}(),a=function(t){function i(){return e(this,i),o(this,n(i).call(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(i,u),i}();return u});